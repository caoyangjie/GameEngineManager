# 项目相关配置
gameengine:
  # 名称
  name: GameEngineManager
  # 版本
  version: 1.0.0
  # 版权年份
  copyrightYear: 2024
  # 实例演示开关
  demoEnabled: false
  # 文件路径 示例（ Windows配置D:/gameengine/uploadPath，Linux配置 /home/gameengine/uploadPath）
  profile: ~/gameengine/uploadPath
  # 获取ip地址开关
  addressEnabled: false
  # 验证码类型 math 数组计算 char 字符验证
  captchaType: math

# 开发环境配置
server:
  # 服务器的HTTP端口
  port: 18080
  servlet:
    # 应用的访问路径
    context-path: /gameweb
  tomcat:
    # tomcat的URI编码
    uri-encoding: UTF-8
    # 连接数满后的排队数，默认为100
    accept-count: 1000
    threads:
      # tomcat最大线程数，默认为200
      max: 800
      # tomcat启动初始化的线程数，默认值10
      min-spare: 100

# 日志配置
logging:
  level:
    root: info
    com.gameengine: debug
  file:
    name: ${user.home}/logs/gameengine/gameengine.log
    path: ${user.home}/logs/gameengine

# Spring配置
spring:
  # 资源信息
  messages:
    # 国际化资源文件路径
    basename: i18n/messages
  profiles:
    active: druid
  # Flyway 数据库版本管理配置
  flyway:
    # 是否启用 Flyway
    enabled: true
    # 迁移脚本位置
    locations: classpath:db/migration
    # 迁移脚本表名
    table: flyway_schema_history
    # 迁移脚本前缀
    sql-migration-prefix: V
    # 迁移脚本分隔符
    sql-migration-separator: __
    # 迁移脚本后缀
    sql-migration-suffixes: .sql
    # 字符编码
    encoding: UTF-8
    # 是否在迁移前进行基线
    baseline-on-migrate: true
    # 是否验证迁移
    validate-on-migrate: true
    # 验证失败时是否清理
    clean-on-validation-error: false
    # 是否允许无序迁移
    out-of-order: false
  # 文件上传
  servlet:
    multipart:
      # 单个文件大小
      max-file-size: 10MB
      # 设置总上传的文件大小
      max-request-size: 20MB
  # 服务模块
  devtools:
    restart:
      # 热部署开关
      enabled: true
  # redis 配置
  data:
    redis:
      # 地址
      host: localhost
      # 端口，默认为6379
      port: 6379
      # 数据库索引
      database: 0
      # 密码
      password:
      # 连接超时时间
      timeout: 10s
      lettuce:
        pool:
          # 连接池中的最小空闲连接
          min-idle: 0
          # 连接池中的最大空闲连接
          max-idle: 8
          # 连接池的最大数据库连接数
          max-active: 8
          # #连接池最大阻塞等待时间（使用负值表示没有限制）
          max-wait: -1ms

# token配置
token:
  # 令牌自定义标识
  header: Authorization
  # 令牌密钥（至少64个字符，满足HS512算法的512位要求）
  secret: GameEngineManagerSecretKeyForJWTTokenGenerationMustBeAtLeast64CharactersLongForHS512AlgorithmSecurity
  # 令牌有效期（默认1440分钟，单位：分钟,一天）
  expireTime: 1440

social:
  auth:
    # 统一回调基础路径，默认 http://localhost:18080/gameweb/oauth/callback
    redirectBase: https://vip.opencao.cn/api/oauth/callback
    # redirectBase: http://localhost:18080/gameweb/oauth/callback
    wechat:
      clientId: ${WECHAT_APP_ID:wxbe8ccd279e797514}
      clientSecret: ${WECHAT_APP_SECRET:c5024ab92271de5ae3b2fe1178faac5e}
      redirectUri: ${WECHAT_REDIRECT:${social.auth.redirectBase}/wechat}
      token: myToken
    qq:
      clientId: ${QQ_APP_ID:101991774}
      clientSecret: ${QQ_APP_SECRET:68016062853d2466683872846434175f}
      redirectUri: ${QQ_REDIRECT:${social.auth.redirectBase}/qq}
      unionId: true
    feishu:
      clientId: ${FEISHU_APP_ID:cli_a014810408774679424}
      clientSecret: ${FEISHU_APP_SECRET:014810408774679424}
      redirectUri: ${FEISHU_REDIRECT:${social.auth.redirectBase}/feishu}
    dingtalk:
      clientId: ${DINGTALK_APP_ID:ding3d692f82974f21103f3c86269698130}
      clientSecret: ${DINGTALK_APP_SECRET:92f82974f21103f3c86269698130}
      redirectUri: ${DINGTALK_REDIRECT:${social.auth.redirectBase}/dingtalk}

# SpringDoc OpenAPI (Swagger) 配置
springdoc:
  api-docs:
    # API 文档路径
    path: /v3/api-docs
    # 是否启用
    enabled: true
  swagger-ui:
    # Swagger UI 路径
    path: /swagger-ui.html
    # 是否启用
    enabled: true
  # 扫描的包路径
  packages-to-scan: com.gameengine
  # 扫描的路径
  paths-to-match: /**
  # 使用 Knife4j (Bootstrap UI)
  knife4j:
    enable: true

