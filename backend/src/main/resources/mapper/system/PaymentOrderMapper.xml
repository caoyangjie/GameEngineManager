<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gameengine.system.mapper.PaymentOrderMapper">
    
    <resultMap type="com.gameengine.system.domain.PaymentOrder" id="PaymentOrderResult">
        <id     property="id"            column="id"             />
        <result property="outTradeNo"   column="out_trade_no"  />
        <result property="paymentType"  column="payment_type"  />
        <result property="tradeType"     column="trade_type"    />
        <result property="subject"       column="subject"       />
        <result property="body"          column="body"          />
        <result property="totalAmount"   column="total_amount"  />
        <result property="status"        column="status"        />
        <result property="tradeNo"      column="trade_no"      />
        <result property="configId"      column="config_id"     />
        <result property="requestData"   column="request_data"  />
        <result property="responseData"  column="response_data" />
        <result property="notifyData"   column="notify_data"   />
        <result property="createTime"    column="create_time"   />
        <result property="updateTime"    column="update_time"  />
    </resultMap>
    
    <sql id="selectPaymentOrderVo">
        select id, out_trade_no, payment_type, trade_type, subject, body, total_amount, status,
               trade_no, config_id, request_data, response_data, notify_data, create_time, update_time
        from payment_order
    </sql>
    
    <select id="findByOutTradeNo" parameterType="String" resultMap="PaymentOrderResult">
        <include refid="selectPaymentOrderVo"/>
        where out_trade_no = #{outTradeNo}
    </select>
    
    <select id="findByPaymentType" parameterType="String" resultMap="PaymentOrderResult">
        <include refid="selectPaymentOrderVo"/>
        where payment_type = #{paymentType}
        order by create_time desc
    </select>
</mapper>
